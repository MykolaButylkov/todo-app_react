(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{33:function(t,e,o){},36:function(t,e,o){"use strict";o.r(e);var n=o(0),c=o(26),a=o.n(c),r=o(13),s=(o(31),o(32),o(33),o(9)),i=o(4),d=o.n(i),u=o(7),l=o(6),p=o(5),b=o(2),j=o(3),f="https://mate.academy/students-api";function m(t){return new Promise((function(e){setTimeout(e,t)}))}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={method:e};return o&&(n.body=JSON.stringify(o),n.headers={"Content-Type":"application/json; charset=UTF-8"}),m(300).then((function(){return fetch(f+t,n)})).then((function(t){var e;if(!t.ok)throw new Error("".concat(t.status," - ").concat(t.statusText));return(null===(e=t.headers.get("content-type"))||void 0===e?void 0:e.includes("application/json"))?t.json():new Error("Content-type is not supported")}))}var v,O,x=function(t){return h(t)},T=function(t,e){return h(t,"POST",e)},y=function(t,e){return h(t,"PATCH",e)},_=function(t){return h(t,"DELETE")},k=function(t){return x("/todos?userId=".concat(t))},N=function(t){return _("/todos/".concat(t))},g=function(t,e){return y("/todos/".concat(t),e)},C=o(12),E=o.n(C);!function(t){t.default="all",t.active="active",t.completed="comleted"}(v||(v={})),function(t){t.all="/",t.active="/active",t.completed="/completed"}(O||(O={}));var w,S=function(t){var e=t.itemsLeftCount,o=t.onDeleteCompletedTodo,n=t.isAnyTodoCompleted,c=Object(b.j)();return Object(j.jsxs)("footer",{className:"todoapp__footer",children:[Object(j.jsxs)("span",{className:"todo-count",children:["".concat(e," "),"items left"]}),Object(j.jsxs)("nav",{className:"filter",children:[Object(j.jsx)(r.b,{to:"/",className:E()("filter__link",{selected:c.pathname===O.all}),"data-type":v.default,children:"All"}),Object(j.jsx)(r.b,{to:"active",className:E()("filter__link",{selected:c.pathname===O.active}),"data-type":v.active,children:"Active"}),Object(j.jsx)(r.b,{to:"completed",className:E()("filter__link",{selected:c.pathname===O.completed}),"data-type":v.completed,children:"Completed"})]}),Object(j.jsx)("button",{type:"button",className:"todoapp__clear-completed",onClick:o,style:{visibility:n?"visible":"hidden"},children:"Clear completed"})]})},F=function(t){var e=t.countActiveTodo,o=t.onHandleAddTodo,c=t.disabled,a=t.onChangeStatusAllTodo,r=t.haveNotTodos,s=Object(n.useState)(""),i=Object(p.a)(s,2),d=i[0],u=i[1];return Object(j.jsxs)("header",{className:"todoapp__header",children:[Object(j.jsx)("button",{type:"button","aria-label":"button",className:E()("todoapp__toggle-all",{active:e>0}),onClick:a,style:{visibility:r?"hidden":"visible"}}),Object(j.jsx)("form",{onSubmit:function(t){t.preventDefault(),o(d,u)},children:Object(j.jsx)("input",{type:"text",className:"todoapp__new-todo",placeholder:"What needs to be done?",value:d,onChange:function(t){var e=t.target.value;u(e)},disabled:c})})]})},A=function(t){var e=t.todo,o=t.onRemoveTodo,c=t.onChangeStatusTodo,a=t.setIdTodoForTempoTodo,r=t.onEditTodo,i=e.id,d=e.title,l=void 0===d?"":d,b=e.completed,f=Object(n.useState)(!1),m=Object(p.a)(f,2),h=m[0],v=m[1],O=Object(n.useState)(l),x=Object(p.a)(O,2),T=x[0],y=x[1],_=Object(n.useRef)(null);return Object(n.useEffect)((function(){_.current&&_.current.focus()}),[]),Object(j.jsxs)("div",{className:E()("todo",{completed:b}),children:[Object(j.jsx)("label",{className:"todo__status-label",htmlFor:"todoStatusCheckbox",children:Object(j.jsx)("input",{id:"todoStatusCheckbox",type:"checkbox",className:"todo__status",checked:b,onChange:function(){return c(e)}})}),h?Object(j.jsx)("form",{onSubmit:function(t){t.preventDefault(),r(Object(s.a)(Object(s.a)({},e),{},{title:T})),a((function(t){return[].concat(Object(u.a)(t),[i])})),v(!1)},children:Object(j.jsx)("input",{ref:_,className:"todo__title-field",type:"text",value:T,onChange:function(t){y(t.target.value)},onBlur:function(){v(!1),y(l)},onKeyDown:function(t){"Escape"===t.key&&(y(l),v(!1))}})}):Object(j.jsx)("span",{className:"todo__title",onDoubleClick:function(){v(!0)},children:l}),Object(j.jsx)("button",{type:"button",className:"todo__remove",onClick:function(){return o(e)},children:"\xd7"}),Object(j.jsxs)("div",{className:"modal overlay",children:[Object(j.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(j.jsx)("div",{className:"loader"})]})]},"todo-".concat(i))},I=function(t){var e=t.visibleTodos,o=t.onRemoveTodo,n=t.onChangeStatusTodo,c=t.idTodoForTempoTodo,a=t.setIdTodoForTempoTodo,r=t.onEditTodo;return Object(j.jsx)(j.Fragment,{children:e.map((function(t){return c.includes(t.id)?Object(j.jsxs)("div",{className:"todo",children:[Object(j.jsx)("label",{className:"todo__status-label",htmlFor:"todoStatusCheckbox",children:Object(j.jsx)("input",{id:"todoStatusCheckbox",type:"checkbox",className:"todo__status"})}),Object(j.jsx)("span",{className:"todo__title",children:t.title}),Object(j.jsx)("button",{type:"button",className:"todo__remove",children:"\xd7"}),Object(j.jsxs)("div",{className:"modal overlay is-active",children:[Object(j.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(j.jsx)("div",{className:"loader"})]})]},"todoTempo-".concat(t.id)):Object(j.jsx)(A,{todo:t,onRemoveTodo:o,onChangeStatusTodo:n,setIdTodoForTempoTodo:a,onEditTodo:r},t.id)}))})},D=function(t){var e=t.visibleTodos,o=t.onRemoveTodo,n=t.onChangeStatusTodo,c=t.idTodoForTempoTodo,a=t.setIdTodoForTempoTodo,r=t.onEditTodo;return Object(j.jsx)("section",{className:"todoapp__main",children:Object(j.jsx)(I,{visibleTodos:e,onRemoveTodo:o,idTodoForTempoTodo:c,onChangeStatusTodo:n,setIdTodoForTempoTodo:a,onEditTodo:r})})},P=function(t){var e=t.errorMessage,o=t.setErrorMessage;return Object(j.jsxs)("div",{className:"notification is-danger is-light has-text-weight-normal",children:[Object(j.jsx)("button",{type:"button","aria-label":"button",className:"delete",onClick:function(){return o(null)}}),e,Object(j.jsx)("br",{})]})};!function(t){t.ErrorGet="Unable to load a todo",t.ErrorPost="Unable to add a todo",t.ErrorDelete="Unable to delete a todo",t.ErrorPatch="Unable to update a todo"}(w||(w={}));var R=10548,U=function(){var t=Object(n.useState)([]),e=Object(p.a)(t,2),o=e[0],c=e[1],a=Object(n.useState)(!1),r=Object(p.a)(a,2),i=r[0],f=r[1],m=Object(n.useState)(null),h=Object(p.a)(m,2),v=h[0],x=h[1],y=Object(n.useState)([]),_=Object(p.a)(y,2),C=_[0],E=_[1],A=function(t,e){switch(t){case O.active:return e.filter((function(t){return!t.completed}));case O.completed:return e.filter((function(t){return t.completed}));default:return e}}(Object(b.j)().pathname,o),I=o.filter((function(t){return!t.completed})).length,U=o.some((function(t){return!0===t.completed})),M=0===o.length;function G(){return(G=Object(l.a)(d.a.mark((function t(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k(R);case 3:e=t.sent,c(e),x(null),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),x(w.ErrorGet);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}var H=function(){var t=Object(l.a)(d.a.mark((function t(e,o){var n,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.trim()){t.next=21;break}return f(!0),n={id:0,userId:R,title:e,completed:!1},c((function(t){return[].concat(Object(u.a)(t),[n])})),E((function(t){return[].concat(Object(u.a)(t),[n.id])})),o(""),t.prev=6,t.next=9,r={title:e,userId:R,completed:!1},T("/todos?userId=".concat(R),r);case 9:a=t.sent,c((function(t){return t.filter((function(t){return 0!==t.id}))})),c((function(t){return[].concat(Object(u.a)(t),[a])})),f(!1),E([]),x(null),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(6),x(w.ErrorPost),f(!1);case 21:case"end":return t.stop()}var r}),t,null,[[6,17]])})));return function(e,o){return t.apply(this,arguments)}}(),J=function(){var t=Object(l.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E((function(t){return[].concat(Object(u.a)(t),[e.id])}));case 2:return t.prev=2,t.next=5,g(e.id,{title:e.title,completed:e.completed});case 5:x(null),E([]),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),x(w.ErrorPatch);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),L=function(){var t=Object(l.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E((function(t){return[].concat(Object(u.a)(t),[e.id])})),t.prev=1,t.next=4,N(e.id);case 4:c((function(t){return t.filter((function(t){return t.id!==e.id}))})),x(null),E([]),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),x(w.ErrorDelete);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),B=function(){var t=Object(l.a)(d.a.mark((function t(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all(o.map((function(t){var e=t.id;return E((function(t){return[].concat(Object(u.a)(t),[e])})),g(e,{completed:!o.every((function(t){return t.completed}))})})));case 3:e=t.sent,c(e),E([]),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),x(w.ErrorPatch);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),K=function(){var t=Object(l.a)(d.a.mark((function t(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=o.filter((function(t){return t.completed})),t.next=4,Promise.all(e.map(function(){var t=Object(l.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E((function(t){return[].concat(Object(u.a)(t),[e.id])})),t.next=3,N(e.id);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:c((function(t){return t.filter((function(t){return!1===t.completed}))})),E([]),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),x(w.ErrorDelete);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){!function(){G.apply(this,arguments)}()}),[]),Object(j.jsxs)("div",{className:"todoapp",children:[Object(j.jsx)("h1",{className:"todoapp__title",children:"todos"}),!1,Object(j.jsxs)("div",{className:"todoapp__content",children:[Object(j.jsx)(F,{countActiveTodo:I,onHandleAddTodo:H,disabled:i,onChangeStatusAllTodo:B,haveNotTodos:M}),Object(j.jsx)(D,{visibleTodos:A,onRemoveTodo:L,onChangeStatusTodo:function(t){c(o.map((function(e){return t.id===e.id?(J(Object(s.a)(Object(s.a)({},t),{},{completed:!t.completed})),Object(s.a)(Object(s.a)({},t),{},{completed:!t.completed})):e})))},idTodoForTempoTodo:C,setIdTodoForTempoTodo:E,onEditTodo:function(t){c(A.map((function(e){return e.id!==t.id?e:(J(Object(s.a)(Object(s.a)({},e),{},{title:t.title})),Object(s.a)(Object(s.a)({},e),{},{title:t.title}))})))}}),!!o.length&&Object(j.jsx)(S,{itemsLeftCount:I,onDeleteCompletedTodo:K,isAnyTodoCompleted:U}),v&&Object(j.jsx)(P,{errorMessage:v,setErrorMessage:x})]})]})};a.a.render(Object(j.jsx)(r.a,{children:Object(j.jsx)(U,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.f8293b3c.chunk.js.map
(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{33:function(t,e,n){},36:function(t,e,n){"use strict";n.r(e);var o=n(0),c=n(26),a=n.n(c),r=n(13),s=(n(31),n(32),n(33),n(10)),i=n(4),u=n.n(i),l=n(8),d=n(6),p=n(5),b=n(2),j=n(3),f="https://mate.academy/students-api";function h(t){return new Promise((function(e){setTimeout(e,t)}))}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o={method:e};return n&&(o.body=JSON.stringify(n),o.headers={"Content-Type":"application/json; charset=UTF-8"}),h(300).then((function(){return fetch(f+t,o)})).then((function(t){var e;if(!t.ok)throw new Error("".concat(t.status," - ").concat(t.statusText));return(null===(e=t.headers.get("content-type"))||void 0===e?void 0:e.includes("application/json"))?t.json():new Error("Content-type is not supported")}))}var v,O,x=function(t){return m(t)},T=function(t,e){return m(t,"POST",e)},g=function(t,e){return m(t,"PATCH",e)},y=function(t){return m(t,"DELETE")},C=function(t){return x("/todos?userId=".concat(t))},k=function(t){return y("/todos/".concat(t))},_=function(t,e){return g("/todos/".concat(t),e)},N=n(12),w=n.n(N);!function(t){t.default="all",t.active="active",t.completed="comleted"}(v||(v={})),function(t){t.all="/",t.active="/active",t.completed="/completed"}(O||(O={}));var E,S=function(t){var e=t.itemsLeftCount,n=t.onDeleteCompletedTodo,o=t.isAnyTodoCompleted,c=Object(b.j)();return Object(j.jsxs)("footer",{className:"todoapp__footer",children:[Object(j.jsxs)("span",{className:"todo-count",children:["".concat(e," "),"items left"]}),Object(j.jsxs)("nav",{className:"filter",children:[Object(j.jsx)(r.b,{to:"/",className:w()("filter__link",{selected:c.pathname===O.all}),"data-type":v.default,children:"All"}),Object(j.jsx)(r.b,{to:"active",className:w()("filter__link",{selected:c.pathname===O.active}),"data-type":v.active,children:"Active"}),Object(j.jsx)(r.b,{to:"completed",className:w()("filter__link",{selected:c.pathname===O.completed}),"data-type":v.completed,children:"Completed"})]}),Object(j.jsx)("button",{type:"button",className:"todoapp__clear-completed",onClick:n,style:{visibility:o?"visible":"hidden"},children:"Clear completed"})]})},F=function(t){var e=t.countActiveTodo,n=t.onHandleAddTodo,c=t.disabled,a=t.onChangeStatusAllTodo,r=t.haveNotTodos,s=Object(o.useState)(""),i=Object(p.a)(s,2),u=i[0],l=i[1];return Object(j.jsxs)("header",{className:"todoapp__header",children:[Object(j.jsx)("button",{type:"button","aria-label":"button",className:w()("todoapp__toggle-all",{active:e>0}),onClick:a,style:{visibility:r?"hidden":"visible"}}),Object(j.jsx)("form",{onSubmit:function(t){return n(t,u,l)},children:Object(j.jsx)("input",{type:"text",className:"todoapp__new-todo",placeholder:"What needs to be done?",value:u,onChange:function(t){var e=t.target.value;l(e)},disabled:c})})]})},D=function(t){var e=t.todo,n=t.onRemoveTodo,c=t.onChangeStatusTodo,a=t.setIdTodoForChange,r=t.onEditTodo,i=e.id,u=e.title,d=void 0===u?"":u,b=e.completed,f=Object(o.useState)(!1),h=Object(p.a)(f,2),m=h[0],v=h[1],O=Object(o.useState)(d),x=Object(p.a)(O,2),T=x[0],g=x[1],y=Object(o.useRef)(null);return Object(o.useEffect)((function(){y.current&&y.current.focus()}),[]),Object(j.jsxs)("div",{className:w()("todo",{completed:b}),children:[Object(j.jsx)("label",{className:"todo__status-label",htmlFor:"todoStatusCheckbox",children:Object(j.jsx)("input",{id:"todoStatusCheckbox",type:"checkbox",className:"todo__status",checked:b,onChange:function(){return c&&c(i)}})}),m?Object(j.jsx)("form",{onSubmit:function(t){t.preventDefault(),r(Object(s.a)(Object(s.a)({},e),{},{title:T})),a((function(t){return[i].concat(Object(l.a)(t))})),v(!1)},children:Object(j.jsx)("input",{ref:y,className:"todo__title-field",type:"text",value:T,onChange:function(t){g(t.target.value)},onBlur:function(){v(!1),g(d)},onKeyDown:function(t){"Escape"===t.key&&(g(d),v(!1))}})}):Object(j.jsx)("span",{className:"todo__title",onDoubleClick:function(){v(!0)},children:d}),Object(j.jsx)("button",{type:"button",className:"todo__remove",onClick:function(){return n&&n(e)},children:"\xd7"}),Object(j.jsxs)("div",{className:"modal overlay",children:[Object(j.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(j.jsx)("div",{className:"loader"})]})]},"todo-".concat(i))},A=function(t){var e=t.visibleTodos,n=t.onRemoveTodo,o=t.onChangeStatusTodo,c=t.idTodoForChange,a=t.setIdTodoForChange,r=t.onEditTodo;return Object(j.jsx)(j.Fragment,{children:e.map((function(t){return c.includes(t.id)?Object(j.jsxs)("div",{className:"todo",children:[Object(j.jsx)("label",{className:"todo__status-label",htmlFor:"todoStatusCheckbox",children:Object(j.jsx)("input",{id:"todoStatusCheckbox",type:"checkbox",className:"todo__status"})}),Object(j.jsx)("span",{className:"todo__title",children:t.title}),Object(j.jsx)("button",{type:"button",className:"todo__remove",children:"\xd7"}),Object(j.jsxs)("div",{className:"modal overlay is-active",children:[Object(j.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(j.jsx)("div",{className:"loader"})]})]},"todo-".concat(t.id).concat(+new Date)):Object(j.jsx)(D,{todo:t,onRemoveTodo:n,onChangeStatusTodo:o,setIdTodoForChange:a,onEditTodo:r},t.id)}))})},I=function(t){var e=t.visibleTodos,n=t.onRemoveTodo,o=t.onChangeStatusTodo,c=t.idTodoForChange,a=t.setIdTodoForChange,r=t.onEditTodo;return Object(j.jsx)("section",{className:"todoapp__main",children:Object(j.jsx)(A,{visibleTodos:e,onRemoveTodo:n,idTodoForChange:c,onChangeStatusTodo:o,setIdTodoForChange:a,onEditTodo:r})})},P=function(t){var e=t.errorMessage,n=t.onDeleteError;return Object(j.jsxs)("div",{className:"notification is-danger is-light has-text-weight-normal",children:[Object(j.jsx)("button",{type:"button","aria-label":"button",className:"delete",onClick:function(){return n()}}),e,Object(j.jsx)("br",{})]})};!function(t){t.ErrorGet="Unable to load a todo",t.ErrorPost="Unable to add a todo",t.ErrorDelete="Unable to delete a todo",t.ErrorPatch="Unable to update a todo"}(E||(E={}));var R=10548,U=function(){var t=Object(o.useState)([]),e=Object(p.a)(t,2),n=e[0],c=e[1],a=Object(o.useState)(!1),r=Object(p.a)(a,2),i=r[0],f=r[1],h=Object(o.useState)(null),m=Object(p.a)(h,2),v=m[0],x=m[1],g=Object(o.useState)([]),y=Object(p.a)(g,2),N=y[0],w=y[1],D=function(t,e){switch(t){case O.active:return e.filter((function(t){return!t.completed}));case O.completed:return e.filter((function(t){return t.completed}));default:return e}}(Object(b.j)().pathname,n),A=n.filter((function(t){return!t.completed})).length,U=n.some((function(t){return!0===t.completed})),G=0===n.length;function H(){return(H=Object(d.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C(R);case 3:e=t.sent,c(e),x(null),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),x(E.ErrorGet);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}var J=function(){var t=Object(d.a)(u.a.mark((function t(e,o,a){var r,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),!o.trim()){t.next=23;break}return f(!0),r={id:0,userId:R,title:o,completed:!1},n.splice(n.length,1,r),w((function(t){return[].concat(Object(l.a)(t),[r.id])})),a(""),t.prev=7,t.next=10,i={title:o,userId:R,completed:!1},T("/todos?userId=".concat(R),i);case 10:return s=t.sent,n.splice(n.length-1,1),t.next=14,c((function(t){return[].concat(Object(l.a)(t),[s])}));case 14:f(!1),w([]),x(null),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(7),x(E.ErrorPost),f(!1);case 23:case"end":return t.stop()}var i}),t,null,[[7,19]])})));return function(e,n,o){return t.apply(this,arguments)}}(),L=function(){var t=Object(d.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w((function(t){return[].concat(Object(l.a)(t),[e.id])})),t.prev=1,t.next=4,_(e.id,{title:e.title,completed:e.completed});case 4:x(null),w([]),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),x(E.ErrorPatch);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),B=function(){var t=Object(d.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w((function(t){return[].concat(Object(l.a)(t),[e.id])})),t.prev=1,t.next=4,k(e.id);case 4:c((function(t){return t.filter((function(t){return t.id!==e.id}))})),x(null),w([]),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),x(E.ErrorDelete);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),M=function(){var t=Object(d.a)(u.a.mark((function t(e){var o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=null,t.next=3,c(n.map((function(t){return t.id!==e?t:o=Object(s.a)(Object(s.a)({},t),{},{completed:!t.completed})})));case 3:o&&L(o);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),K=function(){var t=Object(d.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all(n.map((function(t){var e=t.id;return w((function(t){return[].concat(Object(l.a)(t),[e])})),_(e,{completed:!n.every((function(t){return t.completed}))})})));case 3:e=t.sent,c(e),w([]),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),x(E.ErrorPatch);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),W=function(){var t=Object(d.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=n.filter((function(t){return t.completed})),t.next=4,Promise.all(e.map(function(){var t=Object(d.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w((function(t){return[].concat(Object(l.a)(t),[e.id])})),t.next=3,k(e.id);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:c((function(t){return t.filter((function(t){return!1===t.completed}))})),w([]),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),x(E.ErrorDelete);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){!function(){H.apply(this,arguments)}()}),[]),Object(j.jsxs)("div",{className:"todoapp",children:[Object(j.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(j.jsxs)("div",{className:"todoapp__content",children:[Object(j.jsx)(F,{countActiveTodo:A,onHandleAddTodo:J,disabled:i,onChangeStatusAllTodo:K,haveNotTodos:G}),Object(j.jsx)(I,{visibleTodos:D,onRemoveTodo:B,onChangeStatusTodo:M,idTodoForChange:N,setIdTodoForChange:w,onEditTodo:function(t){c(D.map((function(e){return e.id!==t.id?e:(L(Object(s.a)(Object(s.a)({},e),{},{title:t.title})),Object(s.a)(Object(s.a)({},e),{},{title:t.title}))})))}}),!!n.length&&Object(j.jsx)(S,{itemsLeftCount:A,onDeleteCompletedTodo:W,isAnyTodoCompleted:U}),v&&Object(j.jsx)(P,{errorMessage:v,onDeleteError:function(){x(null)}})]})]})};a.a.render(Object(j.jsx)(r.a,{children:Object(j.jsx)(U,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.d772069d.chunk.js.map
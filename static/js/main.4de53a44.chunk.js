(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{33:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(26),c=n.n(r),a=n(13),s=(n(31),n(32),n(33),n(9)),i=n(4),u=n.n(i),l=n(7),d=n(6),p=n(5),b=n(3),j="https://mate.academy/students-api";function f(e){return new Promise((function(t){setTimeout(t,e)}))}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o={method:t};return n&&(o.body=JSON.stringify(n),o.headers={"Content-Type":"application/json; charset=UTF-8"}),f(300).then((function(){return fetch(j+e,o)})).then((function(e){var t;if(!e.ok)throw new Error("".concat(e.status," - ").concat(e.statusText));return(null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.includes("application/json"))?e.json():new Error("Content-type is not supported")}))}var h,v,O=function(e){return m(e)},x=function(e,t){return m(e,"POST",t)},T=function(e,t){return m(e,"PATCH",t)},g=function(e){return m(e,"DELETE")},y=function(e){return O("/todos?userId=".concat(e))},k=function(e,t){return x("/todos?userId=".concat(e),t)},N=function(e){return g("/todos/".concat(e))},_=function(e,t){return T("/todos/".concat(e),t)},E=n(12),w=n.n(E);!function(e){e.default="all",e.active="active",e.completed="comleted"}(h||(h={})),function(e){e.all="/",e.active="/active",e.completed="/completed"}(v||(v={}));var C,S=n(2),I=function(e){var t=e.itemsLeftCount,n=e.onDeleteCompletedTodo,o=e.isAnyTodoCompleted,r=Object(b.j)();return Object(S.jsxs)("footer",{className:"todoapp__footer",children:[Object(S.jsxs)("span",{className:"todo-count",children:["".concat(t," "),"items left"]}),Object(S.jsxs)("nav",{className:"filter",children:[Object(S.jsx)(a.b,{to:"/",className:w()("filter__link",{selected:r.pathname===v.all}),"data-type":h.default,children:"All"}),Object(S.jsx)(a.b,{to:"active",className:w()("filter__link",{selected:r.pathname===v.active}),"data-type":h.active,children:"Active"}),Object(S.jsx)(a.b,{to:"completed",className:w()("filter__link",{selected:r.pathname===v.completed}),"data-type":h.completed,children:"Completed"})]}),Object(S.jsx)("button",{type:"button",className:"todoapp__clear-completed",onClick:n,style:{visibility:o?"visible":"hidden"},children:"Clear completed"})]})},F=function(e){var t=e.countActiveTodo,n=e.onHandleAddTodo,r=e.disabled,c=e.onChangeStatusAllTodo,a=e.haveNotTodos,s=Object(o.useState)(""),i=Object(p.a)(s,2),u=i[0],l=i[1];return Object(S.jsxs)("header",{className:"todoapp__header",children:[Object(S.jsx)("button",{type:"button","aria-label":"button",className:w()("todoapp__toggle-all",{active:t>0}),onClick:c,style:{visibility:a?"hidden":"visible"}}),Object(S.jsx)("form",{onSubmit:function(e){e.preventDefault(),n(u,l)},children:Object(S.jsx)("input",{type:"text",className:"todoapp__new-todo",placeholder:"What needs to be done?",value:u,onChange:function(e){var t=e.target.value;l(t)},disabled:r})})]})},D=function(e){var t=e.todo,n=e.onRemoveTodo,r=e.onChangeStatusTodo,c=e.setIdTodoForTempoTodo,a=e.onEditTodo,i=t.id,u=t.title,d=void 0===u?"":u,b=t.completed,j=Object(o.useState)(!1),f=Object(p.a)(j,2),m=f[0],h=f[1],v=Object(o.useState)(d),O=Object(p.a)(v,2),x=O[0],T=O[1],g=Object(o.useRef)(null);return Object(o.useEffect)((function(){g.current&&g.current.focus()}),[]),Object(S.jsxs)("div",{className:w()("todo",{completed:b}),children:[Object(S.jsx)("label",{className:"todo__status-label",htmlFor:t.id.toString(),children:Object(S.jsx)("input",{id:t.id.toString(),type:"checkbox",className:"todo__status",checked:b,onChange:function(){return r(t)}})}),m?Object(S.jsx)("form",{onSubmit:function(e){e.preventDefault(),a(Object(s.a)(Object(s.a)({},t),{},{title:x})),c((function(e){return[].concat(Object(l.a)(e),[i])})),h(!1)},children:Object(S.jsx)("input",{ref:g,className:"todo__title-field",type:"text",value:x,onChange:function(e){T(e.target.value)},onBlur:function(){h(!1),T(d)},onKeyDown:function(e){"Escape"===e.key&&(T(d),h(!1))}})}):Object(S.jsx)("span",{className:"todo__title",onDoubleClick:function(){h(!0)},children:d}),Object(S.jsx)("button",{type:"button",className:"todo__remove",onClick:function(){return n(t)},children:"\xd7"}),Object(S.jsxs)("div",{className:"modal overlay",children:[Object(S.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(S.jsx)("div",{className:"loader"})]})]})},A=function(e){var t=e.visibleTodos,n=e.onRemoveTodo,o=e.onChangeStatusTodo,r=e.idTodoForTempoTodo,c=e.setIdTodoForTempoTodo,a=e.onEditTodo;return Object(S.jsx)(S.Fragment,{children:t.map((function(e){return r.includes(e.id)?Object(S.jsxs)("div",{className:"todo",children:[Object(S.jsx)("label",{className:"todo__status-label",htmlFor:"todoStatusCheckbox",children:Object(S.jsx)("input",{id:"todoStatusCheckbox",type:"checkbox",className:"todo__status"})}),Object(S.jsx)("span",{className:"todo__title",children:e.title}),Object(S.jsx)("button",{type:"button",className:"todo__remove",children:"\xd7"}),Object(S.jsxs)("div",{className:"modal overlay is-active",children:[Object(S.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(S.jsx)("div",{className:"loader"})]})]},"todoTempo-".concat(e.id)):Object(S.jsx)(D,{todo:e,onRemoveTodo:n,onChangeStatusTodo:o,setIdTodoForTempoTodo:c,onEditTodo:a},e.id)}))})},P=function(e){var t=e.visibleTodos,n=e.onRemoveTodo,o=e.onChangeStatusTodo,r=e.idTodoForTempoTodo,c=e.setIdTodoForTempoTodo,a=e.onEditTodo;return Object(S.jsx)("section",{className:"todoapp__main",children:Object(S.jsx)(A,{visibleTodos:t,onRemoveTodo:n,idTodoForTempoTodo:r,onChangeStatusTodo:o,setIdTodoForTempoTodo:c,onEditTodo:a})})},R=function(e){var t=e.errorMessage,n=e.setErrorMessage;return Object(S.jsxs)("div",{className:"notification is-danger is-light has-text-weight-normal",children:[Object(S.jsx)("button",{type:"button","aria-label":"button",className:"delete",onClick:function(){return n(null)}}),t,Object(S.jsx)("br",{})]})};!function(e){e.ErrorGet="Unable to load a todo",e.ErrorPost="Unable to add a todo",e.ErrorDelete="Unable to delete a todo",e.ErrorPatch="Unable to update a todo"}(C||(C={}));var U,L=function(e){var t=e.setUserID,n=Object(o.useState)(""),r=Object(p.a)(n,2),c=r[0],a=r[1],s=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("/users?email=".concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o={name:"User-".concat((1e3*Math.random()).toFixed()),username:"UserName",email:t,phone:123456789},x("/users",o);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}var o}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();function l(){return(l=Object(d.a)(u.a.mark((function e(n){var o,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,s(c);case 3:if(!(o=e.sent)||0!==o.length){e.next=9;break}return e.next=7,i(c);case 7:(r=e.sent)&&(t(r.id),localStorage.setItem("userId","".concat(r.id)));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(S.jsx)("section",{className:"section",children:Object(S.jsxs)("div",{className:"box is-size-3",children:[Object(S.jsx)("h1",{children:"Log in to open todos"}),Object(S.jsx)("span",{className:"highlight",children:"Email"}),Object(S.jsxs)("form",{onSubmit:function(e){return l.apply(this,arguments)},children:[Object(S.jsx)("input",{type:"email",value:c,placeholder:"Enter your email",onChange:function(e){var t=e.target;return a(t.value)},required:!0}),Object(S.jsx)("br",{}),Object(S.jsx)("button",{type:"submit",children:"Login"})]})]})})};!function(e){e[e.ZERO=0]="ZERO"}(U||(U={}));var M=U.ZERO,G=function(){var e=Object(o.useState)([]),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)(!1),a=Object(p.a)(c,2),i=a[0],j=a[1],f=Object(o.useState)(null),m=Object(p.a)(f,2),h=m[0],O=m[1],x=Object(o.useState)([]),T=Object(p.a)(x,2),g=T[0],E=T[1],w=Object(o.useState)(M),D=Object(p.a)(w,2),A=D[0],U=D[1],G=function(e,t){switch(e){case v.active:return t.filter((function(e){return!e.completed}));case v.completed:return t.filter((function(e){return e.completed}));default:return t}}(Object(b.j)().pathname,n),H=n.filter((function(e){return!e.completed})).length,J=n.some((function(e){return!0===e.completed})),Z=0===n.length;function B(){return(B=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(M);case 3:t=e.sent,r(t),O(null),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),O(C.ErrorGet);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var q=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.trim()){e.next=21;break}return j(!0),o={id:0,userId:M,title:t,completed:!1},r((function(e){return[].concat(Object(l.a)(e),[o])})),E((function(e){return[].concat(Object(l.a)(e),[o.id])})),n(""),e.prev=6,e.next=9,k(M,{title:t,userId:M,completed:!1});case 9:c=e.sent,r((function(e){return e.filter((function(e){return 0!==e.id}))})),r((function(e){return[].concat(Object(l.a)(e),[c])})),j(!1),E([]),O(null),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(6),O(C.ErrorPost),j(!1);case 21:case"end":return e.stop()}}),e,null,[[6,17]])})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E((function(e){return[].concat(Object(l.a)(e),[t.id])}));case 2:return e.prev=2,e.next=5,_(t.id,{title:t.title,completed:t.completed});case 5:O(null),E([]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),O(C.ErrorPatch);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E((function(e){return[].concat(Object(l.a)(e),[t.id])})),e.prev=1,e.next=4,N(t.id);case 4:r((function(e){return e.filter((function(e){return e.id!==t.id}))})),O(null),E([]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),O(C.ErrorDelete);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(n.map((function(e){var t=e.id;return E((function(e){return[].concat(Object(l.a)(e),[t])})),_(t,{completed:!n.every((function(e){return e.completed}))})})));case 3:t=e.sent,r(t),E([]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),O(C.ErrorPatch);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.filter((function(e){return e.completed})),e.next=4,Promise.all(t.map(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E((function(e){return[].concat(Object(l.a)(e),[t.id])})),e.next=3,N(t.id);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:r((function(e){return e.filter((function(e){return!1===e.completed}))})),E([]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),O(C.ErrorDelete);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){!function(){B.apply(this,arguments)}()}),[]);var V=localStorage.getItem("userId");return Object(o.useEffect)((function(){null!==V&&U(+V)}),[A]),Object(S.jsx)("div",{className:"todoapp",children:A?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(S.jsxs)("div",{className:"todoapp__content",children:[Object(S.jsx)(F,{countActiveTodo:H,onHandleAddTodo:q,disabled:i,onChangeStatusAllTodo:W,haveNotTodos:Z}),Object(S.jsx)(P,{visibleTodos:G,onRemoveTodo:K,onChangeStatusTodo:function(e){r(n.map((function(t){return e.id===t.id?(z(Object(s.a)(Object(s.a)({},e),{},{completed:!e.completed})),Object(s.a)(Object(s.a)({},e),{},{completed:!e.completed})):t})))},idTodoForTempoTodo:g,setIdTodoForTempoTodo:E,onEditTodo:function(e){r(G.map((function(t){return t.id!==e.id?t:(z(Object(s.a)(Object(s.a)({},t),{},{title:e.title})),Object(s.a)(Object(s.a)({},t),{},{title:e.title}))})))}}),!!n.length&&Object(S.jsx)(I,{itemsLeftCount:H,onDeleteCompletedTodo:Q,isAnyTodoCompleted:J}),h&&Object(S.jsx)(R,{errorMessage:h,setErrorMessage:O})]})]}):Object(S.jsx)(L,{setUserID:U})})};c.a.render(Object(S.jsx)(a.a,{children:Object(S.jsx)(G,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.4de53a44.chunk.js.map